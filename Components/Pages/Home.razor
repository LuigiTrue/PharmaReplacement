@page "/"
@using RepyPharma.Components.Components
@inject IStockService StockService
@inject IGridColumnService ColumnService



<PageTitle>Home</PageTitle>

<GridComponent TItem="Stock" Items="_data" Columns="Columns" />

@code {
    private List<Stock>? Data = new();
    private IQueryable<Stock>? _data;
    private List<GridColumnDefinition<Stock>> Columns = new();

    protected override async Task OnInitializedAsync()
    {
        Data = await StockService.GetStocksAsync();
        _data = Data.AsQueryable();

        Columns = ColumnService.Generate<Stock>(
        x => x.StockName,
        x => x.StockCode,
        x => x.DangerLevel
        );
    }
}